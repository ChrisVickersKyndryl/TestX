---
- hosts: all
  gather_facts: true
  vars:
    my_list:
      - name: 172.16.25.23
        command:
          - 100
          - 101
      - name: 172.16.25.22
        command:
          - 200
          - 201
          - 202
          - 203
      - name: Item 3
        command:
          - 300
          - 301
        
  tasks:

    - name: Create directory structure
      win_file:
        path: C:\Temp\{{ item }}\
        state: directory
      loop: "{{ my_list | selectattr('name', 'equalto', inventory_hostname) | map(attribute='command') | first }}"
      
    - name: Debug ansible hostname
      debug:
        msg: "{{ ansible_hostname }}"

    - name: Debug inventory hostname
      debug:
        msg: "{{ inventory_hostname }}"
